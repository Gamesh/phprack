<!DOCTYPE html PUBLIC 
    "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 * @version $Id$
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <style type="text/css">
            <?php include PHPRACK_PATH . '/layout/index.css' ?>
        </style>
        <title>phpRack Testing Report</title>
    </head>

    <body>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

        <div id='logo'>
            <a href='http://www.phprack.com'><img
                src='data:image/png;base64,<?php
                    echo base64_encode(
                        file_get_contents(PHPRACK_PATH . '/layout/logo.png')
                    )
                ?>'
                alt='phpRack' /></a>
            <span>v<?php echo PHPRACK_VERSION?></span>
        </div>

        <?php $i = 0; ?>
        <?php $jsCalls = array(); ?>
        <div id='task-list'>
            <?php foreach ($this->runner->getTests() as $test):?>
            <?php $ajaxOptions = $test->getAjaxOptions();?>

            <div id="d<?php echo ++$i?>" class="task">
                <span class="label"><?php echo $test->getLabel() ?>:</span>
                <span class="result"><?php
                if (!empty($ajaxOptions['autoStart'])) {
                    echo 'waiting...';
                } else {
                    echo 'click to start...';
                }
                // No enter before span to avoid slideToogle() problem in IE
                ?></span>
                <pre style="display:none;"></pre>
            </div>
                <?php 
                $jsCalls[$i] = array(
                    'divId'     => 'div#d' . $i,
                    'fileName'  => $this->jsPath($test->getFileName()),
                    'autoStart' => $ajaxOptions['autoStart'] ? true : false
                );
                ?>
            <?php endforeach; ?>
        </div>

        <script type="text/javascript">
        //<![CDATA[
            <?php include PHPRACK_PATH . '/layout/index.js' ?>
        //]]>
        </script>
    </body>
</html>
